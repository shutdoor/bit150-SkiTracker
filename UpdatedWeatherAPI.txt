package Apis;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.util.HashMap;
import java.util.Map;

import com.google.gson.Gson;
import com.google.gson.reflect.TypeToken;


public class WeatherUnlocked {
	

	private int temperatureF = -99;
	private int temperatureC= -99;
	private int feelTemperatureFahrenheit = -99;
	private int feelTemperatureCelsius = -99;
	private int windSpeedMiles = -99; 
	private int windSpeedMeters = -99; 
	private int windSpeedKnots = -99; 
	private String weatherDescription = "";
	private double visablityMiles = -99.99;
	private int windDirect = -99;
	private String windCardinalDirection = "";
	private double seaLevelInches = -99;
	private int weatherCode = -99;
	private int humidity = -99;
	
	public Map<String, Object> jsonToMap(String str){
		Map<String, Object> map = new Gson().fromJson(str, new TypeToken<HashMap<String, Object>>() {}.getType()
	);
		return map;
	}
	
	
	public WeatherUnlocked(String LongLad) {	
	String urlString = "http://api.weatherunlocked.com/api/current/"+ LongLad +"?app_id=1d40955a&app_key=9d3fc39c0386179efefac4a669c92c10&timezone=gmt";
	try {
		StringBuilder result = new StringBuilder();
		URL url = new URL(urlString);
		URLConnection conn = url.openConnection();
		BufferedReader rd = new BufferedReader(new InputStreamReader(conn.getInputStream()));
		String line;
		while ((line = rd.readLine()) != null) {
			result.append(line);
		}
		rd.close();
		
		Map<String, Object> respMap = jsonToMap(result.toString());
		
		double tempF = (double) respMap.get("temp_f");
		setTemperatureF((int) Math.round(tempF));
		double tempC = (double) respMap.get("temp_c");
		setTemperatureC((int) Math.round(tempC));
		double feelTempF = (double) respMap.get("feelslike_f");
		setFeelTemperatureFahrenheit((int) Math.round(feelTempF));
		double feelTempC = (double) respMap.get("feelslike_c");
		setFeelTemperatureCelsius((int) Math.round(feelTempC));
		double windSpeedMph = (double) respMap.get("windspd_mph");
		setWindSpeedMiles((int) Math.round(windSpeedMph));
		double windSpeedM = (double) respMap.get("windspd_kmh");
		setWindSpeedMeters((int) Math.round(windSpeedM));
		double windSpeedK = (double) respMap.get("windspd_kts");
		setWindSpeedKnots((int)Math.round(windSpeedK));
		String weatherDesc = (String) respMap.get("wx_desc");
		setWeatherDescription(weatherDesc);
		double weatherCode = (double) respMap.get("wx_code");
		setWeatherCode((int)Math.round(weatherCode));
		double visablity = (double) respMap.get("vis_mi");
		setVisablityMiles(visablity);
		double windDirection = (double) respMap.get("winddir_deg");
		setWindDirect((int) windDirection);
		String windCompass = (String) respMap.get("winddir_compass");
		setWindCardinalDirection(windCompass);
		double seaLevel = (double) respMap.get("slp_in");
		setSeaLevelInches(seaLevel);
		double humidity = (double) respMap.get("humid_pct");
		setHumidity((int) humidity);
		
		
	}catch (IOException e) {
		System.out.println(e.getMessage());
	}
}


	public  int getTemperatureF() {
		return temperatureF;
	}


	public  void setTemperatureF(int temperatureF) {
		this.temperatureF = temperatureF;
	}


	public  int getTemperatureC() {
		return temperatureC;
	}


	public  void setTemperatureC(int temperatureC) {
		this.temperatureC = temperatureC;
	}


	public  int getFeelTemperatureFahrenheit() {
		return feelTemperatureFahrenheit;
	}


	public  void setFeelTemperatureFahrenheit(int feelTemperatureFahrenheit) {
		this.feelTemperatureFahrenheit = feelTemperatureFahrenheit;
	}


	public  int getFeelTemperatureCelsius() {
		return feelTemperatureCelsius;
	}


	public  void setFeelTemperatureCelsius(int feelTemperatureCelsius) {
		this.feelTemperatureCelsius = feelTemperatureCelsius;
	}


	public  int getWindSpeedMiles() {
		return windSpeedMiles;
	}


	public  void setWindSpeedMiles(int windSpeedMiles) {
		this.windSpeedMiles = windSpeedMiles;
	}


	public  int getWindSpeedMeters() {
		return windSpeedMeters;
	}


	public  void setWindSpeedMeters(int windSpeedMeters) {
		this.windSpeedMeters = windSpeedMeters;
	}


	public  int getWindSpeedKnots() {
		return windSpeedKnots;
	}


	public  void setWindSpeedKnots(int windSpeedKnots) {
		this.windSpeedKnots = windSpeedKnots;
	}


	public  String getWeatherDescription() {
		return weatherDescription;
	}


	public  void setWeatherDescription(String weatherDescription) {
		this.weatherDescription = weatherDescription;
	}


	public  double getVisablityMiles() {
		return visablityMiles;
	}


	public  void setVisablityMiles(double visablityMiles) {
		this.visablityMiles = visablityMiles;
	}


	public  int getWindDirect() {
		return windDirect;
	}


	public  void setWindDirect(int windDirect) {
		this.windDirect = windDirect;
	}


	public  String getWindCardinalDirection() {
		return windCardinalDirection;
	}


	public  void setWindCardinalDirection(String windCardinalDirection) {
		this.windCardinalDirection = windCardinalDirection;
	}


	public  double getSeaLevelInches() {
		return seaLevelInches;
	}


	public  void setSeaLevelInches(double seaLevelInches) {
		this.seaLevelInches = seaLevelInches;
	}


	public int getWeatherCode() {
		return weatherCode;
	}


	public void setWeatherCode(int weatherCode) {
		this.weatherCode = weatherCode;
	}


	public int getHumidity() {
		return humidity;
	}


	public void setHumidity(int humidity) {
		this.humidity = humidity;
	}

	
	
}